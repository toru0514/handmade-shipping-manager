# UC-002: 新規注文を通知する

## 基本情報

| 項目 | 内容 |
|-----|------|
| ユースケースID | UC-002 |
| ユースケース名 | 新規注文を通知する |
| アクター | システム |
| 優先度 | 高 |
| ステータス | 未実装 |

## 概要

新規注文がスプレッドシートに登録されたタイミングで、Slackに通知を送信する。

## 事前条件

- UC-001により注文がスプレッドシートに登録されていること
- Slack Webhookが設定されていること
- 通知先チャンネルが存在すること

## 事後条件

- Slackに新規注文の通知が投稿されている

## 基本フロー

1. システムはUC-001の完了を検知する
2. システムは登録された注文情報を取得する
3. システムは以下の情報を含む通知メッセージを作成する：
   - 注文番号
   - 購入者名
   - 購入品名
   - 購入金額
   - プラットフォーム名
4. システムはSlack Webhookを呼び出し、メッセージを送信する

## 代替フロー

### 4a. Slack通知に失敗した場合
1. システムはリトライを3回まで試みる
2. 3回失敗した場合、エラーログを記録する
3. 注文自体は登録済みのため、処理は継続する

## ビジネスルール

- BR-001: 通知は注文登録から1分以内に送信する
- BR-002: 重複注文（スキップされた場合）は通知しない

## 非機能要件

- Slack通知のレイテンシは3秒以内
- 通知失敗時は最大3回リトライする

## 画面・UI

このユースケースはバックグラウンド処理のため、画面は存在しない。

### Slack通知フォーマット

```
🛒 新規注文が入りました！

注文番号: ORD-2024-001234
購入者: 山田 太郎 様
商品名: ハンドメイドアクセサリー
金額: ¥2,500
プラットフォーム: minne
注文日時: 2024/01/15 14:30

👉 発送準備をお願いします
```

## データ

### 入力データ
- 注文情報（スプレッドシートから取得）

### 出力データ
- Slack通知メッセージ

## 関連ユースケース

- UC-001: 購入情報を取得する（先行ユースケース）

## 備考

- 将来的にはLINE通知やメール通知にも対応可能
- 通知内容はカスタマイズ可能にする予定
