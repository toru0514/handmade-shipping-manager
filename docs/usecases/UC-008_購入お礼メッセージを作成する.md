# UC-008: 購入お礼メッセージを作成する

## 基本情報

| 項目 | 内容 |
|-----|------|
| ユースケースID | UC-008 |
| ユースケース名 | 購入お礼メッセージを作成する |
| アクター | 作家 |
| 優先度 | 高 |
| ステータス | 未実装 |

## 概要

注文が入った際に、購入者へ送る購入お礼メッセージを定型文ベースで自動生成し、コピーしやすい形で表示する。

## 事前条件

- 注文がスプレッドシートに登録されていること
- 購入お礼の定型文が設定されていること（UC-010）

## 事後条件

- 購入お礼メッセージが生成され、画面に表示されている
- メッセージがクリップボードにコピー可能な状態になっている

## 基本フロー

1. 作家は発送前注文一覧（UC-003）から対象注文の「購入お礼」ボタンをクリックする
2. システムは注文情報を取得する
3. システムは以下の情報を定型文に埋め込む：
   - 購入者名
   - 購入品名
   - （オプション）購入金額
   - （オプション）発送予定日
4. システムは生成されたメッセージをダイアログで表示する
5. 作家は「コピー」ボタンをクリックする
6. システムはメッセージをクリップボードにコピーする
7. 作家はminne/creemaのメッセージ機能に貼り付けて送信する

## 代替フロー

### 1a. 注文登録完了時に自動表示する場合
1. UC-001完了後、システムは自動的に購入お礼メッセージを生成する
2. システムはダッシュボードに「お礼メッセージをコピー」ボタンを表示する
3. 基本フロー5へ続く

### 4a. メッセージを編集する場合
1. 作家は生成されたメッセージを編集できる
2. 編集後、「コピー」ボタンをクリックする

### 4b. 定型文を変更したい場合
1. 作家は「定型文を編集」リンクをクリックする
2. システムは定型文設定画面（UC-010）へ遷移する

## ビジネスルール

- BR-001: 定型文は設定画面（UC-010）で編集可能
- BR-002: プラットフォームごとに異なる定型文を設定可能
- BR-003: 変数（購入者名など）はプレースホルダーで指定

## 非機能要件

- メッセージ生成は即時（1秒以内）
- クリップボードコピーは確実に動作すること

## 画面・UI

### 購入お礼メッセージダイアログ

```
┌─────────────────────────────────────────────────────────────────┐
│ 💌 購入お礼メッセージ                          [定型文を編集]    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  注文: ORD-2024-001234 (minne)                                  │
│  購入者: 山田 太郎 様                                           │
│  商品: ハンドメイドアクセサリー                                  │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 山田 太郎 様                                             │   │
│  │                                                         │   │
│  │ この度は「ハンドメイドアクセサリー」をご購入いただき、    │   │
│  │ 誠にありがとうございます。                               │   │
│  │                                                         │   │
│  │ 心を込めてお作りした作品です。                           │   │
│  │ 発送準備が整いましたら、改めてご連絡いたします。          │   │
│  │                                                         │   │
│  │ ご不明な点がございましたら、お気軽にお問い合わせください。│   │
│  │                                                         │   │
│  │ 今後ともよろしくお願いいたします。                       │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  [編集する]                          [コピー 📋]  [閉じる]       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### コピー完了表示

```
┌─────────────────────────────────────────────────────────────────┐
│ ✅ コピーしました！                                              │
│                                                                 │
│ minne/creemaのメッセージ機能に貼り付けてください。               │
└─────────────────────────────────────────────────────────────────┘
```

### 発送前注文一覧での表示

```
┌─────────────────────────────────────────────────────────────────────┐
│ 🟠 minne │ ORD-001 │ 山田太郎 │ アクセサリーA │ 1/13 │ 2日        │
│          [購入お礼] [クリックポスト] [宅急便コンパクト]            │
└─────────────────────────────────────────────────────────────────────┘
```

## 定型文テンプレート

### デフォルトテンプレート

```
{{buyer_name}} 様

この度は「{{product_name}}」をご購入いただき、誠にありがとうございます。

心を込めてお作りした作品です。
発送準備が整いましたら、改めてご連絡いたします。

ご不明な点がございましたら、お気軽にお問い合わせください。

今後ともよろしくお願いいたします。
```

### 利用可能な変数

| 変数 | 説明 | 例 |
|-----|------|-----|
| `{{buyer_name}}` | 購入者名 | 山田 太郎 |
| `{{product_name}}` | 商品名 | ハンドメイドアクセサリー |
| `{{price}}` | 金額 | ¥2,500 |
| `{{order_id}}` | 注文番号 | ORD-2024-001234 |
| `{{platform}}` | プラットフォーム | minne |

## データ

### 入力データ
- 注文情報
- 定型文テンプレート

### 出力データ
- 生成されたお礼メッセージ（テキスト）

## 関連ユースケース

- UC-001: 購入情報を自動取得する（注文登録後に実行可能）
- UC-003: 発送前注文一覧を表示する（ボタン配置）
- UC-010: 定型文を設定する（テンプレート設定）

## 備考

- 将来的にはAIによるパーソナライズメッセージ生成も検討
- リピーターには特別なメッセージを追加する機能も検討
- メッセージ送信履歴の記録も将来的に検討
