# UC-006: 購入者情報を検索・参照する

## 基本情報

| 項目 | 内容 |
|-----|------|
| ユースケースID | UC-006 |
| ユースケース名 | 購入者情報を検索・参照する |
| アクター | 作家 |
| 優先度 | 中 |
| ステータス | 未実装 |

## 概要

過去の購入者情報を検索・参照し、購入履歴やリピーター情報を確認できるようにする。

## 事前条件

- 作家がシステムにログインしていること
- スプレッドシートに注文データが存在すること

## 事後条件

- 検索条件に合致する購入者情報が表示されている

## 基本フロー

1. 作家は「購入者検索」画面にアクセスする
2. 作家は検索条件を入力する：
   - 購入者名（部分一致）
   - 注文番号
   - プラットフォーム
   - 購入日時の範囲
   - ステータス
3. システムはスプレッドシートから条件に合致する注文を検索する
4. システムは検索結果を一覧表示する
5. 作家は一覧から詳細を確認したい注文を選択する
6. システムは注文の詳細情報を表示する

## 代替フロー

### 3a. 検索結果が0件の場合
1. システムは「該当する購入者が見つかりませんでした」とメッセージを表示する

### 5a. リピーター情報を確認する場合
1. 作家は購入者名をクリックする
2. システムはその購入者の全注文履歴を表示する
3. システムは購入回数、総購入金額を集計して表示する

## ビジネスルール

- BR-001: 検索結果は最大100件まで表示する
- BR-002: 購入者名は部分一致で検索できる
- BR-003: 個人情報は適切にマスキング表示する（オプション）

## 非機能要件

- 検索処理は3秒以内に完了する
- 検索結果の表示は2秒以内

## 画面・UI

### 検索画面

```
┌─────────────────────────────────────────────────────────────────────┐
│ 🔍 購入者検索                                                        │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  検索条件                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 購入者名: [________________]                                 │   │
│  │ 注文番号: [________________]                                 │   │
│  │ プラットフォーム: [全て ▼]                                   │   │
│  │ 購入日時: [________] 〜 [________]                           │   │
│  │ ステータス: [全て ▼]                                         │   │
│  │                                                              │   │
│  │                                        [クリア] [検索]        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  検索結果: 15件                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 注文番号    │ 購入者名   │ 購入品      │ 日時   │ ステータス │   │
│  ├─────────────────────────────────────────────────────────────┤   │
│  │ ORD-001    │ 山田太郎   │ アクセサリー │ 1/13  │ 発送済み  │   │
│  │ ORD-005    │ 山田太郎   │ ピアス      │ 12/20 │ 発送済み  │   │
│  │ ORD-010    │ 山田花子   │ ネックレス   │ 11/15 │ 発送済み  │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 購入者詳細画面（リピーター表示）

```
┌─────────────────────────────────────────────────────────────────────┐
│ 👤 購入者詳細: 山田 太郎 様                                          │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  📊 サマリー                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 購入回数: 5回                                                │   │
│  │ 総購入金額: ¥12,500                                          │   │
│  │ 初回購入日: 2023/06/15                                       │   │
│  │ 最終購入日: 2024/01/13                                       │   │
│  │ 主な購入プラットフォーム: minne (80%)                        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📍 配送先住所                                                      │
│  〒100-0001 東京都千代田区千代田1-1-1                               │
│  電話番号: 090-1234-5678                                           │
│                                                                     │
│  📦 購入履歴                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ #1 │ 2024/01/13 │ minne  │ アクセサリーA │ ¥2,500 │ 発送済み │   │
│  │ #2 │ 2023/12/20 │ minne  │ ピアスセット  │ ¥3,000 │ 発送済み │   │
│  │ #3 │ 2023/10/05 │ creema │ リングB      │ ¥2,000 │ 発送済み │   │
│  │ #4 │ 2023/08/12 │ minne  │ ネックレスC   │ ¥3,500 │ 発送済み │   │
│  │ #5 │ 2023/06/15 │ minne  │ ブレスレットD │ ¥1,500 │ 発送済み │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  [閉じる]                                                           │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

## データ

### 入力データ
- 検索条件（購入者名、注文番号、プラットフォーム、日付範囲、ステータス）

### 出力データ
- 検索結果一覧
- 購入者詳細情報
- 購入履歴

## 関連ユースケース

- UC-003: 発送前注文一覧を表示する
- UC-007: 発送完了を記録する

## 備考

- 将来的にはリピーター向けの特別対応（メッセージカード同封など）機能も検討
- 個人情報保護の観点から、アクセスログを記録することも検討
- エクスポート機能（CSV出力）も将来的に検討
